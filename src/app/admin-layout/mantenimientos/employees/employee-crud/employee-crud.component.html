<div class="contenedor">
  <div class="header">
    @if (mode === 'create') {
      <h1 class="color-blanco cliente-titulo">
        Crear
        @if (kind === 'clientes') { Cliente }
        @else if (kind === 'empleados') { Empleado }
        @else { Proveedor }
      </h1>
    } @else if (mode === 'edit') {
      <h1 class="color-blanco cliente-titulo">
        Editar
        @if (kind === 'clientes') { Cliente }
        @else if (kind === 'empleados') { Empleado }
        @else { Proveedor }
      </h1>
    } @else {
      <h1 class="color-blanco cliente-titulo">
        Ver
        @if (kind === 'clientes') { Cliente }
        @else if (kind === 'empleados') { Empleado }
        @else { Proveedor }
      </h1>
    }
  </div>

  <div class="shadow-box">

    <!-- =========================
         DATOS GENERALES
    ========================== -->
    <div class="block-form-person-type">

      <div class="campos">
        <div>
          <label class="color-blanco">Tipo de Documento</label>
        </div>
        <div class="campo-input">
          <select class="form-select"
                  name="documentTypeId"
                  [(ngModel)]="documentTypeSelected"
                  (ngModelChange)="onDocumentTypeChange($event)"
                  [disabled]="mode === 'view' || (isEdit && hasValue(documentTypeSelected))"
                  required>
            <option value="" disabled>Seleccione opción</option>

            @for (dt of documentTypes; track dt.documentTypeId) {
              <option [value]="dt.documentTypeId">{{ dt.documentType }}</option>
            }
          </select>
        </div>
      </div>

      <div class="campos">
        <div>
          <label class="color-blanco">Documento</label>
        </div>
        <div class="campo-input">
          <input [(ngModel)]="client.person.documentPerson"
                 type="text"
                 [readonly]="mode === 'view' || (isEdit && hasValue(client.person.documentPerson))">
        </div>
      </div>

      <div class="campos span-2">
        <div>
          <label class="color-blanco">Email</label>
        </div>
        <div class="campo-input">
          <input [(ngModel)]="client.person.email"
                 type="email"
                 [readonly]="mode === 'view'">
        </div>
      </div>

      <div class="campos">
        <div>
          <label class="color-blanco">Tipo de Persona</label>
        </div>
        <div class="campo-input">
          <select class="form-select"
                  name="personTypeId"
                  [(ngModel)]="selectedPersonTypeId"
                  (ngModelChange)="onPersonTypeChange($event)"
                  [disabled]="mode === 'view' || (isEdit && hasValue(selectedPersonTypeId))"
                  required>
            <option value="" disabled>Seleccione opción</option>

            @for (pt of personTypes; track pt.personTypeId) {
              <option [value]="pt.personTypeId">{{ pt.personType }}</option>
            }
          </select>
        </div>
      </div>

    </div>

    <!-- =========================
         NATURAL / JURIDICA
    ========================== -->
    <div class="block-form">

      @if (selectedPersonTypeId === 'N') {

        <div class="campos">
          <div><label class="color-blanco">Primer Nombre</label></div>
          <div class="campo-input">
            <input [(ngModel)]="client.personNatural.firstName" type="text" [readonly]="mode === 'view'">
          </div>
        </div>

        <div class="campos">
          <div><label class="color-blanco">Segundo Nombre</label></div>
          <div class="campo-input">
            <input [(ngModel)]="client.personNatural.middleName" type="text" [readonly]="mode === 'view'">
          </div>
        </div>

        <div class="campos">
          <div><label class="color-blanco">Tercer Nombre</label></div>
          <div class="campo-input">
            <input [(ngModel)]="client.personNatural.thirdName" type="text" [readonly]="mode === 'view'">
          </div>
        </div>

        <div class="campos">
          <div><label class="color-blanco">Apellido Paterno</label></div>
          <div class="campo-input">
            <input [(ngModel)]="client.personNatural.lastName" type="text" [readonly]="mode === 'view'">
          </div>
        </div>

        <div class="campos">
          <div><label class="color-blanco">Apellido Materno</label></div>
          <div class="campo-input">
            <input [(ngModel)]="client.personNatural.seccondLastName" type="text" [readonly]="mode === 'view'">
          </div>
        </div>

        <div class="campos">
          <div><label class="color-blanco">Género</label></div>
          <div class="campo-input">
            <select name="genero"
                    [(ngModel)]="generSelected"
                    (ngModelChange)="onGenerChange($event)"
                    [disabled]="mode === 'view' || (isEdit && hasValue(generSelected))"
                    required>
              <option value="" disabled>Seleccione opción</option>

              @for (g of geners; track g.generId) {
                <option [value]="g.generId">{{ g.gener }}</option>
              }
            </select>
          </div>
        </div>

        @if (client.personNatural.gener.generId !== 'M') {
          <div class="campos">
            <div><label class="color-blanco">Apellido de Casada</label></div>
            <div class="campo-input">
              <input [(ngModel)]="client.personNatural.marriedLastName" type="text" [readonly]="mode === 'view'">
            </div>
          </div>
        }

        <div class="campos">
          <div><label class="color-blanco">Estatus Social</label></div>
          <div class="campo-input">
            <select class="form-select"
                    name="socialStatus"
                    [(ngModel)]="socialStatusSelected"
                    (ngModelChange)="onSocialStatusChange($event)"
                    [disabled]="mode === 'view'"
                    required>
              <option value="" disabled>Seleccione opción</option>

              @for (pt of statusSocials; track pt.socialStatusId) {
                <option [value]="pt.socialStatusId">{{ pt.socialStatus }}</option>
              }
            </select>
          </div>
        </div>

      } @else {
        <!-- Si es Jurídica, poné aquí tus campos (razón social, etc) -->
      }

    </div>

    <!-- =========================
         ESTADO / ENABLED
    ========================== -->
    <div class="block-form-person-type">
      <div class="campos">
        <div><label class="color-blanco">Habilitado</label></div>
        <div class="campo-input">
          <select class="form-select"
                  name="enabled"
                  [(ngModel)]="enabled"
                  (ngModelChange)="onEnabledChange($event)"
                  [disabled]="mode === 'view'"
                  required>
            <option value="" disabled>Seleccione opción</option>

            @for (pt of types; track pt) {
              <option [value]="pt">{{ pt ? 'Sí' : 'No' }}</option>
            }
          </select>
        </div>
      </div>
    </div>

    <!-- GUARDAR -->
    @if (mode !== 'view') {
      <div class="flex">
        <div class="btn-right">
          <button class="btn btn-primary" (click)="save()">Guardar</button>
        </div>
      </div>
    }

  </div>
</div>

<!-- ✅ Igual que tu patrón: al ver, mostramos el CRUD de direcciones/teléfonos -->
@if (mode === 'view') {
  <info-clients-crud></info-clients-crud>
}